<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Settings Registration Demo</title>
<style>
body{background:#000;color:#0f0;font-family:monospace;text-align:center;}
button{margin:5px;padding:10px;border:2px solid #0f0;background:#000;color:#0f0;cursor:pointer;}
button:disabled{opacity:.3;cursor:default;}
input{margin:5px;padding:8px;background:#000;color:#0f0;border:1px solid #0f0;}
.hidden{display:none;}
.glow{text-shadow:0 0 10px #0f0,0 0 30px #0f0;}
</style>
</head>
<body>

<h1 class="glow">MAIN MENU</h1>
<nav>
  <button id="btnMain">MAIN</button>
  <button id="btnFacebook" disabled>FACEBOOK</button>
  <button id="btnWifi" disabled>WIFI</button>
  <button id="btnSettings">SETTINGS</button>
</nav>

<!-- SETTINGS -->
<div id="settingsDiv" class="hidden">
  <h2>Register to Unlock Features</h2>
  <button onclick="choose('comment')">COMMENT</button>
  <button onclick="choose('feedback')">FEEDBACK</button>

  <div id="commentDiv" class="hidden">
    <input id="comment1" placeholder="Comment 1">
    <input id="comment2" placeholder="Comment 2">
    <button onclick="submitData('comment')">SUBMIT COMMENT</button>
  </div>

  <div id="feedbackDiv" class="hidden">
    <input id="feedback1" placeholder="Feedback 1">
    <input id="feedback2" placeholder="Feedback 2">
    <button onclick="submitData('feedback')">SUBMIT FEEDBACK</button>
  </div>
</div>

<!-- MESSAGE -->
<p id="msg"></p>

<script>
const webAppUrl = "https://script.google.com/macros/s/AKfycbw1XElP7BCEPbUCKYd5llM44IoqoM7Zj-ely2jF1jGTzwny9XnrKeog9wr7yYtyAnBM/exec";
let registered = false;

// BUTTONS
const btnFacebook = document.getElementById("btnFacebook");
const btnWifi = document.getElementById("btnWifi");
const settingsDiv = document.getElementById("settingsDiv");
const commentDiv = document.getElementById("commentDiv");
const feedbackDiv = document.getElementById("feedbackDiv");
const msg = document.getElementById("msg");

// Show settings
document.getElementById("btnSettings").addEventListener("click", ()=>{
  settingsDiv.classList.remove("hidden");
  msg.textContent = "";
});

// MAIN
document.getElementById("btnMain").addEventListener("click", ()=>{
  msg.textContent = "Welcome to MAIN section!";
});

// FACEBOOK
btnFacebook.addEventListener("click", ()=>{
  if(!registered){ alert("SEND FEEDBACK / COMMENT FIRST!"); return;}
  msg.textContent = "Facebook Flow Unlocked!";
});

// WIFI
btnWifi.addEventListener("click", ()=>{
  if(!registered){ alert("SEND FEEDBACK / COMMENT FIRST!"); return;}
  msg.textContent = "WiFi Flow Unlocked!";
});

// Choose Comment or Feedback
function choose(type){
  commentDiv.classList.add("hidden");
  feedbackDiv.classList.add("hidden");
  if(type==="comment") commentDiv.classList.remove("hidden");
  else feedbackDiv.classList.remove("hidden");
}

// Submit Data
async function submitData(type){
  let field1="", field2="";
  if(type==="comment"){
    field1 = document.getElementById("comment1").value;
    field2 = document.getElementById("comment2").value;
  } else {
    field1 = document.getElementById("feedback1").value;
    field2 = document.getElementById("feedback2").value;
  }

  try{
    await fetch(webAppUrl,{
      method:"POST",
      body: JSON.stringify({type, field1, field2})
    });
    registered = true;
    btnFacebook.disabled = false;
    btnWifi.disabled = false;
    settingsDiv.classList.add("hidden");
    commentDiv.classList.add("hidden");
    feedbackDiv.classList.add("hidden");
    msg.textContent = "Registration successful! Facebook and WiFi unlocked.";
  }catch(e){
    alert("Error saving data.");
  }
}
</script>

</body>
</html>
